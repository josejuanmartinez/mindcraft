<p align="center">
<img 
  width="20%"
  src="https://github.com/josejuanmartinez/mindcraft/assets/36634572/0ef83288-9e53-444d-baa0-2c61b0fc26ca" alt="mindcraft"/>
</p>

# MindCraft
The open-source AI solution to craft the minds of your NPC characters for your video games.

It includes the following features:

- Text generation using LLMs (Mistral)
- Motivations, personality, personal goals
- Knowledge and awareness about the world (RAG)
- Short and Long-term memory (RAG)
- Conversational styles
- Supervised finetuning by human feedback

## Example of how to create a World and NPC
```python

game = Game(world_name="Lord of the Rings")
game.book_to_world("./lord_of_the_rings.txt")

character_name = "Galadriel"
character_description = "Elven queen of Lothlorien, bearer of Nenya, an elven ring of power. Married to Celeborn"

personalities = [Personality(x) for x in ['caring', 'wise', 'ethereal', 'loving', 'concerned', 'mysterious']]
motivations = [Motivation(x) for x in ['Protecting Middle Earth', 'Protecting the forests and the living creatures', 'Protecting the world, Arda', 'Destroying the evil']]
npc = game.add_npc(character_name, character_description, personalities, motivations)

interaction = "What do you think about the Rings of Power?"

answer, feedback = npc.react_to(interaction)

```

## Example of prompt generated by the engine
```
<s> You are Galadriel, a character from the world of LordOfTheRings. Answer to the question of another character of your own world, given that you know some details about that topic.


Create your answers taking into account that you are a wise,kk,mysterious,ethereal,caring character. Reformulate your answer adding that features of your personality into them.

Also, you have several goals and motivations in life, namely: Protecting Lothlorient,Protecting the world (Arda),Protecting the Free Peoples,Destroying Sauron,Keeping the legacy of the Elves,Loving the nature and the living creatures,Protecting the forests. Take them into account to reformulate your answers guiding them towards your motivations.
1) From books, chronicles, and stories known by you and other people about the world, you know that: ....The Ring of Power?
-....Let the Ring be your weapon, if it has such power as you say.
-....Did not Gandalf tell you that the rings give power according to the measure of each possessor?
-....The power of the ring had lengthened his years far beyond their span; but that power only the Great Rings wield.
-But there is only one Power in this world that knows all about the Rings and their effects; and as far as I know there is no Power in the world that knows all about hobbits.
Among the Wise I 

Remember you are a character talking to another character. You are not aware of the author / writer of the book or lore. Always answer as a character of a book talking to another character.

### Instruction:
What do you think about the Rings of Power?
```

## Example of answer using Mistral 7B quantized to 4b
```
### Response:
As Galadriel, I have seen the corruption that the Rings of Power have brought to those who possess them. They are a precious burden, a tool that can be both a blessing and a curse. The power they offer is seductive, but the cost is great. I have seen the lengths some will go to seek its allure - the darkness that it can awaken deep within their souls. For those with a weak heart, it serves as a shroud, veiling
```

## LLM integrated
### Quantized (4b)
- [TheBloke/zephyr-7B-beta-AWQ](https://huggingface.co/TheBloke/zephyr-7B-beta-AWQ)
- [TheBloke/openinstruct-mistral-7B-AWQ](https://huggingface.co/TheBloke/openinstruct-mistral-7B-AWQ)

## Embeddings for RAG
- [sentence-transformers/all-MiniLM-L6-v2](https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2)

## CUDA and Torch
Although torch is included in the `transformers` library as a dependency, if you see your gpu is not being
utilized, try to run:
- For Cuda 12.1, 12.2, 12.3:
```
pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```
<p align="center">
<img 
  width="50%"
  src="https://github.com/josejuanmartinez/mindcraft/assets/36634572/7778d4a4-6b25-4b1a-9b26-b1bfa9d94727" alt="mindcraft architecture"/>
</p>
